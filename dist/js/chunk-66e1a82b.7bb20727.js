(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66e1a82b"],{"1ebd":function(e,t,n){e.exports=n.p+"img/qq.2b682f8b.png"},3617:function(e,t,n){},"3c34":function(e,t,n){e.exports=n.p+"img/weixin.ff72f806.png"},5319:function(e,t,n){"use strict";var i=n("d784"),o=n("825a"),a=n("7b0b"),r=n("50c4"),s=n("a691"),c=n("1d80"),l=n("8aa5"),u=n("14c3"),d=Math.max,f=Math.min,g=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g,b=function(e){return void 0===e?e:String(e)};i("replace",2,(function(e,t,n,i){var m=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,p=i.REPLACE_KEEPS_$0,_=m?"$":"$0";return[function(n,i){var o=c(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):t.call(String(o),n,i)},function(e,i){if(!m&&p||"string"===typeof i&&-1===i.indexOf(_)){var a=n(t,e,this,i);if(a.done)return a.value}var c=o(e),g=String(this),h="function"===typeof i;h||(i=String(i));var v=c.global;if(v){var S=c.unicode;c.lastIndex=0}var k=[];while(1){var x=u(c,g);if(null===x)break;if(k.push(x),!v)break;var y=String(x[0]);""===y&&(c.lastIndex=l(g,r(c.lastIndex),S))}for(var A="",O=0,j=0;j<k.length;j++){x=k[j];for(var $=String(x[0]),T=d(f(s(x.index),g.length),0),E=[],M=1;M<x.length;M++)E.push(b(x[M]));var w=x.groups;if(h){var I=[$].concat(E,T,g);void 0!==w&&I.push(w);var L=String(i.apply(void 0,I))}else L=C($,g,T,E,w,i);T>=O&&(A+=g.slice(O,T)+L,O=T+$.length)}return A+g.slice(O)}];function C(e,n,i,o,r,s){var c=i+e.length,l=o.length,u=v;return void 0!==r&&(r=a(r),u=h),t.call(s,u,(function(t,a){var s;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":s=r[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>l){var d=g(u/10);return 0===d?t:d<=l?void 0===o[d-1]?a.charAt(1):o[d-1]+a.charAt(1):t}s=o[u-1]}return void 0===s?"":s}))}}))},"66b9":function(e,t,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},"7b86":function(e,t,n){"use strict";var i=n("3617"),o=n.n(i);o.a},"9ed6":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},["1"===e.isLogin?n("OneKeyLogin"):n("CodeLogin")],1)},o=[],a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"box"},[i("div",{staticClass:"login_box"},[i("div",{staticClass:"oneKey_close",on:{click:e.closeLogin}},[i("van-icon",{attrs:{name:"cross"}})],1),e._m(0),i("div",{staticClass:"login_btn"},[i("van-form",{on:{submit:e.onSubmit}},[i("van-field",{staticClass:"login_tel",attrs:{name:"username",placeholder:"请填写您的手机号",rules:[{required:!0,message:"请输入正确内容"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),i("van-field",{staticClass:"login_tel login_verificationCode",attrs:{name:"authCode",placeholder:"请输入验证码",rules:[{required:!0,message:"请填写验证码"}]},model:{value:e.authCode,callback:function(t){e.authCode=t},expression:"authCode"}}),i("span",{staticClass:"code_btn",on:{click:e.sendCode}},[e._v("发送验证码")]),i("van-button",{staticClass:"login_submit",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 立即登录 ")])],1)],1),i("p",{staticClass:"login_hint"},[e._v("未注册手机号验证后自动创建为爱美账号")]),i("p",{staticClass:"login_way"},[e._v("——— 社交账号直接登录 ———")]),i("div",{staticClass:"login_mode"},[i("img",{attrs:{src:n("3c34"),alt:""},on:{click:e.goWeixin}}),i("img",{attrs:{src:n("1ebd"),alt:""},on:{click:e.goQq}})]),i("p",{staticClass:"login_protocol"},[e._v(" 登录/注册代表您已同意 "),i("span",{on:{click:e.goUserAgreement}},[e._v("《爱美用户使用协议》")])])])])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_box_title"},[n("p",[e._v("登录&注册")]),n("p",[e._v("您好，欢迎使用爱美")])])}],s=(n("e7e5"),n("d399")),c=(n("66b9"),n("b650")),l=(n("be7f"),n("565f")),u=(n("68ef"),n("d282")),d=n("db85"),f=Object(u["a"])("form"),g=f[0],h=f[1],v=g({props:{colon:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,errorMessageAlign:String,validateTrigger:{type:String,default:"onBlur"},showError:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0}},provide:function(){return{vanForm:this}},data:function(){return{fields:[]}},methods:{validateSeq:function(){var e=this;return new Promise((function(t,n){var i=[];e.fields.reduce((function(e,t){return e.then((function(){if(!i.length)return t.validate().then((function(e){e&&i.push(e)}))}))}),Promise.resolve()).then((function(){i.length?n(i):t()}))}))},validateAll:function(){var e=this;return new Promise((function(t,n){Promise.all(e.fields.map((function(e){return e.validate()}))).then((function(e){e=e.filter((function(e){return e})),e.length?n(e):t()}))}))},validate:function(e){return e?this.validateField(e):this.validateFirst?this.validateSeq():this.validateAll()},validateField:function(e){var t=this.fields.filter((function(t){return t.name===e}));return t.length?new Promise((function(e,n){t[0].validate().then((function(t){t?n(t):e()}))})):Promise.reject()},resetValidation:function(e){this.fields.forEach((function(t){e&&t.name!==e||t.resetValidation()}))},scrollToField:function(e){this.fields.forEach((function(t){t.name===e&&t.$el.scrollIntoView()}))},addField:function(e){this.fields.push(e),Object(d["a"])(this.fields,this)},removeField:function(e){this.fields=this.fields.filter((function(t){return t!==e}))},getValues:function(){return this.fields.reduce((function(e,t){return e[t.name]=t.formValue,e}),{})},onSubmit:function(e){e.preventDefault(),this.submit()},submit:function(){var e=this,t=this.getValues();this.validate().then((function(){e.$emit("submit",t)})).catch((function(n){e.$emit("failed",{values:t,errors:n}),e.scrollToError&&e.scrollToField(n[0].name)}))}},render:function(){var e=arguments[0];return e("form",{class:h(),on:{submit:this.onSubmit}},[this.slots()])}}),b=n("365c"),m=n("2b0e");m["a"].use(v),m["a"].use(l["a"]),m["a"].use(c["a"]),m["a"].use(s["a"]);var p={data:function(){return{username:"",authCode:"",userObj:{}}},methods:{onSubmit:function(e){var t=this;Object(b["l"])({username:this.username,authCode:this.authCode}).then((function(e){"400"===e.data.code?Object(s["a"])("验证码错误，请重新输入"):(t.userObj=e.data.data[0],localStorage.setItem("userTel_AM",t.userObj.username),localStorage.setItem("token_AM",t.userObj.token),localStorage.setItem("isLogin_AM",1),localStorage.setItem("loginState_AM","ok"),t.$router.go(-1))}))},goWeixin:function(){},goQq:function(){},sendCode:function(){""===this.username?Object(s["a"])("请填写您的手机号"):/^1[3456789]\d{9}$/.test(this.username)?Object(b["v"])({phoneNumber:this.username}).then((function(e){Object(s["a"])("验证码已发送,请在5分钟内填写")})):Object(s["a"])("手机号输入错误，请重新输入")},goUserAgreement:function(){this.$router.push("/userAgreement")},closeLogin:function(){this.$router.go(-1)}}},_=p,C=(n("e05e"),n("2877")),S=Object(C["a"])(_,a,r,!1,null,"2b4a80c6",null),k=S.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticClass:"oneKey"},[n("div",{staticClass:"oneKey_close",on:{click:e.toCodeLogin}},[n("van-icon",{attrs:{name:"cross"}})],1),e._m(0),n("p",{staticClass:"oneKey_zgyd"},[e._v("中国移动提供认证服务")]),n("p",{staticClass:"oneKey_tel"},[e._v(e._s(e.userTel))]),n("button",{on:{click:e.submit}},[e._v("本机号码一键登录")]),n("p",{staticClass:"oneKey_code",on:{click:e.toCodeLogin}},[e._v("验证码登录")]),n("div",{staticClass:"oneKey_protocol"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.checkbox,expression:"checkbox"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checkbox)?e._i(e.checkbox,null)>-1:e.checkbox},on:{change:function(t){var n=e.checkbox,i=t.target,o=!!i.checked;if(Array.isArray(n)){var a=null,r=e._i(n,a);i.checked?r<0&&(e.checkbox=n.concat([a])):r>-1&&(e.checkbox=n.slice(0,r).concat(n.slice(r+1)))}else e.checkbox=o}}}),n("p",[e._v(" 登录/注册代表您已同意 "),n("span",{on:{click:e.goChinaMobileCertification}},[e._v("《中国移动认证服务条款》")]),e._v(" 和 "),n("span",{on:{click:e.goUserAgreement}},[e._v("《爱美用户使用协议》")])])])])])},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"oneKey_title"},[n("p",[e._v("快捷登录")]),n("p",[e._v("您好，欢迎使用爱美")])])}],A=(n("ac1f"),n("5319"),n("c3a6"),n("ad06"));m["a"].use(A["a"]),m["a"].use(s["a"]);var O={data:function(){return{userTel:localStorage.getItem("userTel_AM"),checkbox:!1}},methods:{goUserAgreement:function(){this.$router.push("/userAgreement")},goChinaMobileCertification:function(){this.$router.push("/chinaMobileCertification")},submit:function(){var e=this;!1===this.checkbox?Object(s["a"])("请认真阅读用户协议并确定后在登录"):Object(b["q"])({username:localStorage.getItem("userTel_AM"),token:localStorage.getItem("token_AM")}).then((function(t){"200"===t.data.code?(localStorage.setItem("loginState_AM","ok"),e.$router.replace("/user")):"300"===t.data.code&&(Object(s["a"])("您的身份认证已过期，请重新登录"),e.toCodeLogin())}))},toCodeLogin:function(){localStorage.removeItem("userTel_AM"),localStorage.setItem("isLogin_AM","0"),this.$router.go(0)}},mounted:function(){this.userTel=this.userTel.substring(0,3)+"****"+this.userTel.substring(7,11)}},j=O,$=(n("7b86"),Object(C["a"])(j,x,y,!1,null,"5225db24",null)),T=$.exports,E={data:function(){return{isLogin:localStorage.getItem("isLogin_AM")}},components:{CodeLogin:k,OneKeyLogin:T},methods:{},mounted:function(){}},M=E,w=Object(C["a"])(M,i,o,!1,null,"0eb977ca",null);t["default"]=w.exports},b650:function(e,t,n){"use strict";var i=n("c31d"),o=n("2638"),a=n.n(o),r=n("d282"),s=n("ba31"),c=n("b1d2"),l=n("48f4"),u=n("ad06"),d=n("543e"),f=Object(r["a"])("button"),g=f[0],h=f[1];function v(e,t,n,i){var o,r=t.tag,f=t.icon,g=t.type,v=t.color,b=t.plain,m=t.disabled,p=t.loading,_=t.hairline,C=t.loadingText,S={};function k(e){p||m||(Object(s["a"])(i,"click",e),Object(l["a"])(i))}function x(e){Object(s["a"])(i,"touchstart",e)}v&&(S.color=b?v:c["h"],b||(S.background=v),-1!==v.indexOf("gradient")?S.border=0:S.borderColor=v);var y=[h([g,t.size,{plain:b,loading:p,disabled:m,hairline:_,block:t.block,round:t.round,square:t.square}]),(o={},o[c["d"]]=_,o)];function A(){var i,o=[];return p?o.push(e(d["a"],{class:h("loading"),attrs:{size:t.loadingSize,type:t.loadingType,color:"currentColor"}})):f&&o.push(e(u["a"],{attrs:{name:f,classPrefix:t.iconPrefix},class:h("icon")})),i=p?C:n.default?n.default():t.text,i&&o.push(e("span",{class:h("text")},[i])),o}return e(r,a()([{style:S,class:y,attrs:{type:t.nativeType,disabled:m},on:{click:k,touchstart:x}},Object(s["b"])(i)]),[A()])}v.props=Object(i["a"])(Object(i["a"])({},l["c"]),{},{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},loadingSize:{type:String,default:"20px"}}),t["a"]=g(v)},bc1b:function(e,t,n){},e05e:function(e,t,n){"use strict";var i=n("f7c8"),o=n.n(i);o.a},f7c8:function(e,t,n){}}]);
//# sourceMappingURL=chunk-66e1a82b.7bb20727.js.map